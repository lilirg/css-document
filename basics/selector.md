# 选择器 Selector

CSS中，选择器用来指定网页上我们想要样式化的HTML元素。

有 CSS 选择器提供了很多种方法，所以在选择要样式化的元素时，我们可以做到很精细的地步。

我们将会详细地讲授选择器的不同使用方式，并了解它们的工作原理。

## 选择器是什么

CSS 选择器是 CSS 规则的第一部分。它是元素和其他部分组合起来告诉浏览器哪个 HTML 元素应当是被选为应用规则中的 CSS 属性值的方式。选择器所选择的元素，叫做“选择器的对象”。

CSS 中，选择器由 CSS 选择器规范加以定义。就像是 CSS 的其他部分那样，它们需要浏览器的支持才能工作。你会遇到的大多数选择器都是在CSS 3中定义的，这是一个成熟的规范，因此你会发现浏览器对这些选择器有良好的支持。

## 选择器列表

如果你有多个使用相同样式的 CSS 选择器，那么这些单独的选择器可以被混编为一个“选择器列表”，这样，规则就可以应用到所有的单个选择器上了。例如，如果我的 `h1`和 `.special`类有相同的 CSS，那么我可以把它们写成两个分开的规则。

```css
h1 {
  color: blue;
}

.special {
  color: blue;
}
```

我也可以将它们组合起来，在它们之间加上一个逗号，变为选择器列表。

```css
h1, .special {
  color: blue;
}
```

空格可以在逗号前或后，你可能还会发现如果每个选择器都另起一行，会更好读些。

```css
h1,
.special {
  color: blue;
}
```

## 不同类型的选择器

有几组不同的选择器，知道了需要哪种选择器，你会更容易正确使用它们。

### 类型、类和 ID 选择器

- 标签选择器，如 `h1{}`，使用目标的html标签
- 类选择器，如 `.box{}`，使用目标的class
- id选择器，如 `#username`，使用目标的id

### 运算符选择器

最后一组选择器可以将其他选择器组合起来，更复杂的选择元素。下面的示例用运算符（`>`）选择了 `<article>`元素的初代子元素。

```css
article > p {
}
```

### 属性选择器

这些选择器允许基于一个元素自身是否存在（例如href）或者基于各式不同的按属性值的匹配，来选取元素。

| 选择器           | 示例                            | 描述                                                                                                                                                                               |
| ---------------- | ------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `[attr]`         | `a[title]`                      | 匹配带有一个名为 `attr`的属性的元素——方括号里的值。                                                                                                                                |
| `[attr=value]`   | `a[href="https://example.com"]` | 匹配带有一个名为attr的属性的元素，其值正为value——引号中的字符串。                                                                                                                  |
| `[attr~=value]`  | `p[class~="special"]`           | 匹配带有一个名为attr的属性的元素，其值正为value，或者匹配带有一个attr属性的元素，`<br>`其值有一个或者更多，至少有一个和value匹配。`<br>`注意，在一列中的好几个值，是用空格隔开的。 |
| `[attr\|=value]` | `div[lang\|=zh]`                | 匹配带有一个名为attr的属性的元素，其值可正为value，或者开始为value，后面紧随着一个连字符。                                                                                         |

### 子字符串匹配选择器

这些选择器让更高级的属性的值的子字符串的匹配变得可行。例如，如果你有 `box-warning`和 `box-error`类，想把开头为“box-”字符串的每个物件都匹配上的话，你可以用 `[class^="box-"]`来把它们两个都选中。

| 选择器          | 示例                | 描述                                                                                          |
| --------------- | ------------------- | --------------------------------------------------------------------------------------------- |
| `[attr^=value]` | `li[class^="box-"]` | 匹配带有一个名为*attr*的属性的元素，其值开头为*value*子字符串。                               |
| `[attr$=value]` | `li[class$="-box"]` | 匹配带有一个名为*attr*的属性的元素，其值结尾为*value*子字符串                                 |
| `[attr*=value]` | `li[class*="box"]`  | 匹配带有一个名为*attr*的属性的元素，其值的字符串中的任何地方，至少出现了一次*value*子字符串。 |

#### 大小写敏感

如果你想在大小写不敏感的情况下，匹配属性值的话，你可以在闭合括号之前，使用`i`值。这个标记告诉浏览器，要以大小写不敏感的方式匹配 ASCII 字符。没有了这个标记的话，值会按照文档语言对大小写的处理方式，进行匹配——HTML 中是大小写敏感的。

下面的示例中，第一个选择器将会匹配一个开头为a的值，这样它只匹配了第一项，因为另外两项开头是大写的 A。第二个选择器使用了大小写不敏感的标记，于是匹配了所有项。

```css
li[class^="a"] {
  background-color: yellow;
}
li[class^="a" i] {
  color: red;
}
```
```html
<ul>
  <li class="a">Item 1</li>
  <li class="A">Item 2</li>
  <li class="Ab">Item 3</li>
</ul>
```

### 伪类和伪元素


#### 伪类

伪类是选择器的一种，它用于选择处于特定状态的元素，比如当它们是这一类型的第一个元素时，或者是当鼠标指针悬浮在元素上面的时候。它们表现得会像是你向你的文档的某个部分应用了一个类一样，帮你在你的标记文本中减少多余的类，让你的代码更灵活、更易于维护。

伪类就是开头为冒号的关键字：

```css
:pseudo-class-name
```

| 选择器               | 描述                                                                                                                                                                                                          |
| -------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `:active`            | 在用户激活（例如点击）元素的时候匹配。                                                                                                                                                                        |
| `:any-link`          | 匹配一个链接的`:link`和`:visited`状态。                                                                                                                                                                       |
| `:blank`             | 匹配空输入值的`<input>`元素。                                                                                                                                                                                 |
| `:checked`           | 匹配处于选中状态的单选或者复选框。                                                                                                                                                                            |
| `:current`           | 匹配正在展示的元素，或者其上级元素。                                                                                                                                                                          |
| `:default`           | 匹配一组相似的元素中默认的一个或者更多的 UI 元素。                                                                                                                                                            |
| `:dir`               | 基于其方向性（HTML`dir`属性或者 CSS`direction`属性的值）匹配一个元素。                                                                                                                                        |
| `:disabled`          | 匹配处于关闭状态的用户界面元素                                                                                                                                                                                |
| `:empty`             | 匹配除了可能存在的空格外，没有子元素的元素。                                                                                                                                                                  |
| `:enabled`           | 匹配处于开启状态的用户界面元素。                                                                                                                                                                              |
| `:first`             | 匹配分页媒体的第一页。                                                                                                                                                                                        |
| `:first-child`       | 匹配兄弟元素中的第一个元素。                                                                                                                                                                                  |
| `:first-of-type`     | 匹配兄弟元素中第一个某种类型的元素。                                                                                                                                                                          |
| `:focus`             | 当一个元素有焦点的时候匹配。                                                                                                                                                                                  |
| `:focus-visible`     | 当元素有焦点，且焦点对用户可见的时候匹配。                                                                                                                                                                    |
| `:focus-within`      | 匹配有焦点的元素，以及子代元素有焦点的元素。                                                                                                                                                                  |
| `:future`            | 匹配当前元素之后的元素。                                                                                                                                                                                      |
| `:hover`             | 当用户悬浮到一个元素之上的时候匹配。                                                                                                                                                                          |
| `:indeterminate`     | 匹配未定态值的 UI 元素，通常为复选框checkbox)。                                                                                                                                                               |
| `:in-range`          | 用一个区间匹配元素，当值处于区间之内时匹配。                                                                                                                                                                  |
| `:invalid`           | 匹配诸如`<input>`的位于不可用状态的元素。                                                                                                                                                                     |
| `:lang`              | 基于语言（HTML`lang`属性的值）匹配元素。                                                                                                                                                                      |
| `:last-child`        | 匹配兄弟元素中最末的那个元素。                                                                                                                                                                                |
| `:last-of-type`      | 匹配兄弟元素中最后一个某种类型的元素。                                                                                                                                                                        |
| `:left`              | 在分页媒体中，匹配左手边的页。                                                                                                                                                                                |
| `:link`              | 匹配未曾访问的链接。                                                                                                                                                                                          |
| `:local-link`        | 匹配指向和当前文档同一网站页面的链接。                                                                                                                                                                        |
| `:is`, `:is()`       | 匹配传入的选择器列表中的任何选择器。                                                                                                                                                                          |
| `:not`               | 匹配作为值传入自身的选择器未匹配的物件。                                                                                                                                                                      |
| `:nth-child`         | 匹配一列兄弟元素中的元素——兄弟元素按照*an+b*形式的式子进行匹配<br>（比如 2n+1 匹配元素 1、3、5、7 等。即所有的奇数个）。                                                                                      |
| `:nth-of-type`       | 匹配某种类型的一列兄弟元素（比如，`<p>`元素）——兄弟元素按照*an+b*形式的式子进行匹配<br>（比如 2n+1 匹配元素 1、3、5、7 等。即所有的奇数个）。                                                                 |
| `:nth-last-child`    | 匹配一列兄弟元素，从后往前倒数。兄弟元素按照*an+b*形式的式子进行匹配<br>（比如 2n+1 匹配按照顺序来的最后一个元素，然后往前两个，再往前两个，诸如此类。从后往前数的所有奇数个）。                              |
| `:nth-last-of-type`  | 匹配某种类型的一列兄弟元素（比如，`<p>`元素），从后往前倒数。兄弟元素按照*an+b*形式的式子进行匹配<br>（比如 2n+1 匹配按照顺序来的最后一个元素，然后往前两个，再往前两个，诸如此类。从后往前数的所有奇数个）。 |
| `:only-child`        | 匹配没有兄弟元素的元素。                                                                                                                                                                                      |
| `:only-of-type`      | 匹配兄弟元素中某类型仅有的元素。                                                                                                                                                                              |
| `:optional`          | 匹配不是必填的 form 元素。                                                                                                                                                                                    |
| `:out-of-range`      | 按区间匹配元素，当值不在区间内的的时候匹配。                                                                                                                                                                  |
| `:past`              | 匹配当前元素之前的元素。                                                                                                                                                                                      |
| `:placeholder-shown` | 匹配显示占位文字的 input 元素。                                                                                                                                                                               |
| `:playing`           | 匹配代表音频、视频或者相似的能“播放”或者“暂停”的资源的，且正在“播放”的元素。                                                                                                                                  |
| `:paused`            | 匹配代表音频、视频或者相似的能“播放”或者“暂停”的资源的，且正在“暂停”的元素。                                                                                                                                  |
| `:read-only`         | 匹配用户不可更改的元素。                                                                                                                                                                                      |
| `:read-write`        | 匹配用户可更改的元素。                                                                                                                                                                                        |
| `:required`          | 匹配必填的 form 元素。                                                                                                                                                                                        |
| `:right`             | 在分页媒体中，匹配右手边的页。                                                                                                                                                                                |
| `:root`              | 匹配文档的根元素。                                                                                                                                                                                            |
| `:scope`             | 匹配任何为参考点元素的的元素。                                                                                                                                                                                |
| `:valid`             | 匹配诸如`<input>`元素的处于可用状态的元素。                                                                                                                                                                   |
| `:target`            | 匹配当前 URL 目标的元素（例如如果它有一个匹配当前URL 分段的元素）。                                                                                                                                           |
| `:visited`           | 匹配已访问链接。                                                                                                                                                                                              |


#### 伪元素

伪元素以类似方式表现，不过表现得是像你往标记文本中加入全新的 HTML 元素一样，而不是向现有的元素上应用类。伪元素开头为双冒号::。

```CSS
::pseuo-element-name
```

> 备注： 一些早期的伪元素曾使用单冒号的语法，所以你可能会在代码或者示例中看到。现代的浏览器为了保持后向兼容，支持早期的带有单双冒号语法的伪元素。

| 选择器             | 描述                                                 |
| ------------------ | ---------------------------------------------------- |
| `::after`          | 匹配出现在原有元素的实际内容之后的一个可样式化元素。 |
| `::before`         | 匹配出现在原有元素的实际内容之前的一个可样式化元素。 |
| `::first-letter`   | 匹配元素的第一个字母。                               |
| `::first-line`     | 匹配包含此伪元素的元素的第一行。                     |
| `::grammar-error`  | 匹配文档中包含了浏览器标记的语法错误的那部分。       |
| `::selection`      | 匹配文档中被选择的那部分。                           |
| `::spelling-error` | 匹配文档中包含了浏览器标记的拼写错误的那部分。       |

### 关系选择器

这一种选择器被命名为关系选择器（Combinator），这是因为它们在其他选择器之间和其他选择器与文档内容的位置之间建立了一种有用的关系的缘故。关系选择器可以让你选择文档中特定类型的元素，或者选择特定类型的元素之间的关系。

#### 后代选择器


后代选择器（Descendant Selector）是一种关系选择器，它选择元素的后代元素。后代选择器的语法是两个选择器之间用空格分隔。

匹配处于带有`.box`类的元素中的所有`<p>`元素：

```css
.box p
```

#### 子元素选择器

子元素选择器（Child Selector）是一种关系选择器，它选择元素的直接子元素。子元素选择器的语法是两个选择器之间用大于号`>`分隔。

匹配`<article>`元素的直接子元素：

```css
article > p
```

#### 相邻兄弟选择器

相邻兄弟选择器（Adjacent Sibling Selector）是一种关系选择器，它选择元素的相邻兄弟元素。相邻兄弟选择器的语法是两个选择器之间用加号`+`分隔。

匹配`<p>`元素的紧跟着的`<p>`元素：

```css`类的元素里面的<p>元素。

```css
p + p
```


#### 通用兄弟选择器


通用兄弟选择器（General Sibling Selector）是一种关系选择器，它选择元素的任何兄弟元素。通用兄弟选择器的语法是两个选择器之间用加号`+`和大于号`>`分隔。

匹配`<p>`元素的紧跟着的任何元素：

```css
p ~ *
```

#### 后代选择器和子元素选择器的区别

后代选择器选择的是元素的后代元素，而子元素选择器选择的是元素的直接子元素。

例如，如果我们有如下HTML结构：

```html
<div class="box">
  <p>This is a paragraph.</p>
  <div class="inner">
    <p>This is another paragraph.</p>
  </div>
</div>
```

如果我们使用后代选择器选择`.box`元素中的所有`<p>`元素，则会匹配到两个`<p>`元素：

```css
.box p {
  /* styles */
}
```

而如果我们使用子元素选择器选择`.box`元素的直接子元素`<p>`元素，则只会匹配到第一个`<p>`元素：

```css
.box > p {
  /* styles */
}
```

因此，后代选择器会选择到`.box`元素中的所有`<p>`元素，而子元素选择器只会选择到`.box`元素的直接子元素`<p>`元素。